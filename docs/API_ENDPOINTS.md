# API Endpoints AI DECLARANT

## –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ë–∞–∑–æ–≤—ã–π URL:** `http://127.0.0.1:8000/api/`

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** Django Session Authentication / Token Authentication

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤:** JSON

## Health Check Endpoints

### GET /api/health/
–ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy|unhealthy",
  "timestamp": "2025-06-30T12:27:02.454643",
  "components": {
    "database": {"status": "healthy", "details": "..."},
    "redis": {"status": "healthy|unhealthy", "error": "..."},
    "celery": {"status": "healthy|unhealthy", "error": "..."},
    "filesystem": {"status": "healthy|warning", "details": "..."}
  }
}
```

### GET /api/ready/
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é

### GET /api/live/
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## HS –ö–æ–¥—ã API

### GET /api/hs-codes/
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö HS –∫–æ–¥–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `page_size` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–û—Ç–≤–µ—Ç:**
```json
{
  "count": 4,
  "next": null,
  "previous": null,
  "results": [
    {
      "id": 1,
      "code": "8703.10.00",
      "description": "–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –ª–µ–≥–∫–æ–≤—ã–µ",
      "category": "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç",
      "subcategory": "–û–±—â–∞—è –≥—Ä—É–ø–ø–∞",
      "is_active": true,
      "created_at": "2025-06-30T13:12:25.552833+05:00",
      "updated_at": "2025-06-30T13:12:25.552855+05:00"
    }
  ]
}
```

### GET /api/hs-codes/{id}/
–î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ HS –∫–æ–¥–∞

### GET /api/hs-codes/search/?q={query}
–ü–æ–∏—Å–∫ HS –∫–æ–¥–æ–≤ –ø–æ –∫–æ–¥—É, –æ–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `q` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

**–û—Ç–≤–µ—Ç:**
```json
{
  "results": [
    {
      "id": 1,
      "code": "8703.10.00",
      "description": "–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –ª–µ–≥–∫–æ–≤—ã–µ"
    }
  ]
}
```

### GET /api/hs-codes/categories/
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π HS –∫–æ–¥–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "categories": ["–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "–û–¥–µ–∂–¥–∞", "–ü—Ä–æ–¥—É–∫—Ç—ã"]
}
```

## –ó–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

### GET /api/tasks/
–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üîí **–¢—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**

### POST /api/tasks/
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞

üîí **–¢—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `multipart/form-data`
- `file` - Excel –∏–ª–∏ CSV —Ñ–∞–π–ª (–º–∞–∫—Å. 10MB)

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "user": "admin2",
  "file_name": "products.xlsx",
  "status": "pending",
  "total_items": 0,
  "processed_items": 0,
  "progress_percent": 0.0,
  "celery_task_id": "abc-123",
  "created_at": "2025-06-30T12:00:00+05:00"
}
```

### GET /api/tasks/{id}/
–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏

### GET /api/tasks/{id}/status/
–°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "status": "processing|completed|failed",
  "total_items": 100,
  "processed_items": 45,
  "progress_percent": 45.0,
  "error_message": null
}
```

### POST /api/tasks/{id}/cancel/
–û—Ç–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

### GET /api/tasks/{id}/items/
–ü–æ–∑–∏—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∑–∞–¥–∞—á–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page`, `page_size` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è  
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (`pending`, `processed`, `confirmed`, `needs_review`)

### GET /api/tasks/{id}/export/?format=excel
–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (TODO)

## –ü–æ–∑–∏—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤

### GET /api/items/
–°–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üîí **–¢—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**

### GET /api/items/{id}/
–î–µ—Ç–∞–ª–∏ –ø–æ–∑–∏—Ü–∏–∏ —Ç–æ–≤–∞—Ä–∞

### PATCH /api/items/{id}/
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Ç–æ–≤–∞—Ä–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "status": "confirmed|needs_review",
  "user_comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "final_hs_code_id": 123
}
```

### POST /api/items/{id}/approve/
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π AI HS –∫–æ–¥

### POST /api/items/{id}/reject/
–û—Ç–∫–ª–æ–Ω–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π AI HS –∫–æ–¥

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "comment": "–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è"
}
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `200` - –£—Å–ø–µ—à–Ω–æ
- `201` - –°–æ–∑–¥–∞–Ω–æ
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `403` - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- `404` - –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `503` - –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞

```bash
curl -X POST http://127.0.0.1:8000/api/tasks/ \
  -H "Authorization: Token YOUR_TOKEN" \
  -F "file=@products.xlsx"
```

### –ü–æ–∏—Å–∫ HS –∫–æ–¥–∞

```bash
curl "http://127.0.0.1:8000/api/hs-codes/search/?q=–∞–≤—Ç–æ–º–æ–±–∏–ª—å"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏

```bash
curl http://127.0.0.1:8000/api/tasks/1/status/
```

## –°—Ç–∞—Ç—É—Å—ã –ø–æ–∑–∏—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤

- `pending` - –û–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `processed` - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ AI
- `confirmed` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º  
- `needs_review` - –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

## –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á (–±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–∑–∂–µ). 